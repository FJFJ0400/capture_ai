# PRD - Capture AI Agent MVP

## 0) 문서 정보
- 문서 목적: Capture AI Agent의 MVP 제품 범위, 성공 기준, 실행 계획 합의
- 작성일: 2026-02-06
- 문서 버전: v1.1
- 대상 독자: 기획, 프론트엔드, 백엔드, 워커/인프라, QA

## 1) 서비스 한 줄 정의
사용자가 쌓아둔 스크린샷을 업로드하면 AI가 자동으로 요약/분류하고, 바로 실행 가능한 다음 행동(TODO)까지 연결해 주는 개인용 인입함 서비스.

## 2) 배경과 문제 정의
### 현재 사용자 문제
- 캡처는 빠르게 쌓이지만 나중에 다시 찾기 어렵다.
- 같은 맥락(영수증, 일정, 공지, 대화)이 섞여 저장되어 재정리 비용이 크다.
- 저장은 했지만 실제 행동(등록, 회신, 정리)으로 이어지지 않는다.

### 해결 가설
- 업로드 직후 자동 요약/분류/태그를 제공하면 재검색 비용이 줄어든다.
- 추천 액션을 즉시 TODO로 저장하게 하면 “저장만 하고 잊는 문제”를 줄일 수 있다.

## 3) 목표와 비목표
### 목표 (MVP)
- 업로드 -> 자동 처리 -> 탐색/검색 -> 행동 실행까지 닫힌 루프를 제공한다.
- 사용자가 주간 단위로 반복 사용 가능한 기본 습관(인입함 확인 + 액션 실행)을 만든다.

### 비목표 (MVP 제외)
- OS 레벨 자동 수집(모바일 공유시트, 데스크톱 훅)의 완전 자동화
- 멀티 사용자/조직 단위 권한 체계
- 고비용 클라우드 OCR/LLM 파이프라인의 본격 운영

## 4) 타깃 사용자
### 1차 타깃
- 업무용 캡처가 많은 개인 사용자(직장인, 1인 사업자, 프리랜서)

### 핵심 사용 맥락
- 영수증/정산 자료를 나중에 정리하려고 저장
- 회의/메신저/공지 캡처에서 할 일을 추출해야 함
- 예약/일정 화면을 저장했지만 후속 행동이 누락됨

## 5) 핵심 가치 제안
- 기억 대행: 저장한 이미지를 요약/태그 기반으로 빠르게 재발견
- 정리 자동화: 카테고리 분류와 상태 표시로 인입함 가시성 확보
- 행동 전환: 추천 액션을 TODO로 즉시 전환해 실행률 개선

## 6) 핵심 사용자 여정 (MVP)
1. 사용자가 이미지를 다중 업로드한다.
2. 인입함에서 항목 상태를 확인한다 (`UPLOADED` -> `PROCESSING` -> `DONE`/`FAILED`).
3. 상세에서 요약/카테고리/태그/OCR을 확인한다.
4. 추천 액션을 선택해 TODO를 생성한다.
5. TODO 목록에서 후속 작업을 수행/관리한다.

## 7) 기능 요구사항
### 7.1 Must Have (출시 필수)
- 멀티 파일 업로드 + 즉시 인입함 반영
- 비동기 처리 파이프라인(Queue/Worker) 기반 OCR/요약/분류/태그/액션 생성
- 인입함 검색/필터(키워드, 카테고리, 상태, 기간)
- 상세 화면(원본 이미지, 요약, 카테고리, 태그, OCR 텍스트)
- 추천 액션 -> TODO 생성/조회/수정/삭제
- 실패 항목 재처리(재시도) 및 상태 일관성
- 기본 보안(파일 타입/용량 제한, API Key 인증, 로그 마스킹, 파일 암호화 저장)

### 7.2 Should Have (MVP 안정화)
- SSE 기반 상태 실시간 반영(폴링 최소화)
- idempotency 및 재시도 정책(최대 3회)
- 목적 프로필(`purpose`) 기반 분류/요약 문맥 보정
- 삭제 API 및 운영용 에러 코드 정교화

### 7.3 Could Have (후속 실험)
- 저장된 캡처 기반 대화형 질의응답(`/chat/query`) 고도화
- 외부 액션 연동(캘린더/노션/슬랙)
- 모바일 공유시트/브라우저 확장 인입

## 8) 수용 기준 (Acceptance Criteria)
- 업로드 성공 시 2초 이내 인입함에 신규 항목이 표시된다.
- 정상 항목의 평균 처리 시간은 10초 이내를 목표로 한다(로컬 OCR 기준).
- 실패 항목은 재처리 요청 시 `UPLOADED` 상태로 복구된다.
- 검색/필터 결과는 API 쿼리 조건과 일치해야 한다.
- 액션 실행으로 생성된 TODO는 즉시 목록에서 조회 가능해야 한다.
- 인증 실패 시 `UNAUTHORIZED` 에러 규약을 일관되게 반환한다.

## 9) 비기능 요구사항
- 성능: 리스트/상세 주요 API p95 응답 500ms 이하 목표(로컬 환경 기준)
- 안정성: 워커 실패 재시도 3회, 부분 실패 격리, 중복 처리 방지
- 보안: OCR 원문/민감 텍스트 로그 미기록, 저장 파일 암호화
- 운영성: 최소한의 구조화 로그와 에러 코드로 장애 원인 추적 가능
- 확장성: 스토리지는 로컬에서 S3 호환 인터페이스로 교체 가능해야 함

## 10) 성공 지표
### North Star
- 주간 완료 액션 수(캡처에서 생성된 TODO의 완료 건수)

### 선행 지표
- WAU(주간 활성 사용자)
- 주간 캡처 인입량
- 처리 성공률(`DONE / 전체`)
- 재처리 비율(`retry / FAILED`)
- 액션 실행률(상세 조회 대비 TODO 생성 비율)
- 평균 처리 지연 시간 및 p95 처리 지연

## 11) 운영 정책
- 파일 제한: PNG/JPG/WEBP, 최대 10MB
- 상태 모델: `UPLOADED`, `PROCESSING`, `DONE`, `FAILED`
- 인증 모델: 단일 사용자 API Key(추후 JWT/OAuth 확장)
- 데이터 삭제: 캡처 삭제 시 원본 파일과 메타데이터를 함께 삭제

## 12) 릴리스 범위 및 마일스톤
### M1: 코어 루프 완성
- 업로드, 비동기 처리, 인입함/상세, TODO 기본 기능

### M2: 안정화
- 실패 재처리, SSE 반영, 에러 코드/로그 정비, 성능 튜닝

### M3: 확장 실험
- 목적 프로필 고도화, 대화형 질의응답 개선, 외부 연동 검토

## 13) 리스크와 대응
- OCR 품질 편차: 카테고리/요약 신뢰도 저하 가능
  대응: 실패/저신뢰 항목 재처리와 수동 확인 UX 제공
- 처리 지연 증가: 대기열 정체 시 사용자 이탈 가능
  대응: 상태 가시화, SSE 업데이트, 워커 동시성 조정
- 민감정보 노출: 캡처 데이터 보안 사고 가능
  대응: 로그 마스킹, 저장 암호화, 접근키 관리 정책 적용

## 14) 검증 계획 (초기 2주)
- 대상: 5~10명 내외 실제 캡처 다빈도 사용자
- 방법: 업로드 -> 상세 확인 -> TODO 실행까지 실제 태스크 수행
- 수집: 처리 시간, 실패율, 액션 실행률, 인터뷰 기반 유용성 점수
- 성공 기준:
  - 주당 사용자당 3회 이상 인입
  - 업로드 대비 액션 실행률 20% 이상
  - 처리 성공률 90% 이상
