# UX Spec - Capture AI Agent

## 공통 상태 정의
- 상태 값: `UPLOADED`, `PROCESSING`, `DONE`, `FAILED`
- 상태 표시: 인입함 리스트와 상세 상단에 동일 배지 표기
- 처리 완료: `summary`, `category`, `tags`, `actionSuggestions` 노출
- 처리 대기: "대기" 문구와 스켈레톤 또는 플레이스홀더 사용
- 에러 코드: `UNAUTHORIZED`, `INVALID_STATUS`, `INVALID_CATEGORY`, `FILE_TOO_LARGE`, `NOT_FOUND`, `INTERNAL_ERROR`

## 공통 UX 규칙
- 네트워크 오류는 화면 상단 경고 배너로 노출하고 기존 데이터는 유지
- API Key 누락/오류 시 `UNAUTHORIZED` 안내 배너와 재시도 버튼 제공
- 업로드/저장/재처리 중 버튼은 비활성화하고 진행 상태 텍스트 제공
- 검색/필터는 수동 적용 버튼을 기본으로 하되, 확장 시 자동 적용 가능

## 화면별 UX 시나리오와 상태

### 인입함 (업로드 + 리스트) `/`
**주요 시나리오**
1. 진입 시 최신 인입함 목록 조회
2. 멀티 파일 업로드 후 즉시 리스트 반영
3. 필터/검색 적용으로 리스트 재조회
4. 항목 클릭 시 상세로 이동
5. `FAILED` 항목은 재처리 요청

**상태 정의**
- 로딩: 리스트 스켈레톤과 필터 버튼 비활성화
- 빈 상태: "아직 인입된 캡처가 없습니다" + 업로드 CTA
- 업로드 중: 드롭존에 진행 상태 표시, 업로드 버튼 비활성화
- 업로드 실패: 실패 파일명과 원인 표시, 재업로드 CTA
- 필터 결과 없음: "검색 결과가 없습니다" + 필터 초기화 CTA
- 오류 상태: 에러 배너 표시, 기존 리스트 유지

### 상세 `/inbox/:id`
**주요 시나리오**
1. 상세 진입 시 메타데이터와 원본 이미지 로드
2. `DONE` 상태면 요약/태그/카테고리/액션 표시
3. `PROCESSING` 상태면 요약/태그/액션은 "대기"로 표기
4. OCR 텍스트 보기 토글
5. 추천 액션 클릭 시 TODO 생성
6. 이미지 로딩 실패 시 대체 영역 표시

**상태 정의**
- 로딩: 전체 카드 스켈레톤
- `NOT_FOUND`: "존재하지 않는 항목" 메시지와 인입함 이동 CTA
- `FAILED`: 실패 원인과 재처리 버튼 표시
- 이미지 실패: 이미지 영역에 실패 메시지
- 액션 저장 중: 액션 버튼 비활성화 및 저장 중 표시
- 오류 상태: 에러 배너 표시, 가능한 데이터는 유지

### TODO `/todos`
**주요 시나리오**
1. 진입 시 TODO 목록 조회
2. 수동 입력으로 TODO 생성
3. 상세 화면의 액션에서 TODO 생성

**상태 정의**
- 로딩: 리스트 스켈레톤
- 빈 상태: "등록된 TODO가 없습니다" + 입력 CTA
- 입력 오류: 빈 문자열일 경우 버튼 비활성화
- 오류 상태: 에러 배너 표시

### 설정 `/settings` (기획 화면)
**주요 시나리오**
1. API Key 노출과 복사
2. 파일 제한 정책 안내
3. 스토리지 정보 안내

**상태 정의**
- API Key 미설정: 안내 메시지와 설정 가이드 링크

## 화면-API 매핑 표
| 화면 | 사용자 액션 | API | Method | 요청 요약 | 성공 시 UI | 실패 시 UI |
| --- | --- | --- | --- | --- | --- | --- |
| 인입함 | 최초 진입 | `/v1/captures` | GET | `query/category/status/from/to` | 리스트 렌더링 | 에러 배너, 기존 데이터 유지 |
| 인입함 | 업로드 | `/v1/captures` | POST | `multipart/form-data` 필드 `files` | 새 항목 `UPLOADED` 반영 | 실패 파일 안내, 재시도 |
| 인입함 | 필터 적용 | `/v1/captures` | GET | 필터 쿼리 | 결과 리스트 렌더링 | 에러 배너 |
| 인입함 | 재처리 | `/v1/captures/:id/retry` | POST | 없음 | 상태 `UPLOADED`로 갱신 | 실패 메시지 |
| 상세 | 상세 진입 | `/v1/captures/:id` | GET | 없음 | 메타데이터 표시 | `NOT_FOUND` 또는 에러 배너 |
| 상세 | 원본 이미지 | `/v1/captures/:id/file` | GET | 없음 | 이미지 렌더링 | 이미지 실패 영역 |
| 상세 | 액션 실행 | `/v1/todos` | POST | `{ title, sourceCaptureId }` | TODO 생성 완료 토스트 | 실패 메시지 |
| TODO | 목록 조회 | `/v1/todos` | GET | 없음 | 리스트 렌더링 | 에러 배너 |
| TODO | 수동 생성 | `/v1/todos` | POST | `{ title }` | 리스트 갱신 | 실패 메시지 |
| 설정 | API Key | 미정 | - | - | 표시/복사 | - |
| 공통 | 삭제 | 미정 | - | - | 제거 반영 | - |

## 미정 항목
- 삭제 API 스펙 필요
- TODO 완료 처리 API 스펙 필요
- 자동 폴링 여부 결정
